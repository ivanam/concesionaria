<%= form_for persona_concesionarium, html: { class: "form-horizontal", role: "form", autocomplete: "off"}  do |f| %>
  <% if persona_concesionarium.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(persona_concesionarium.errors.count, "error") %> prohibited this persona_concesionarium from being saved:</h2>

      <ul>
      <% persona_concesionarium.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title"  align="center">Usuario de la concesionaria</h3>
      <h3 class="panel-title"  align="center"><%= Concesionarium.find(persona_concesionarium.concesionaria_id) %></h3>
    </div>
    <br/>
    <div class="form-group">
      <label class="col-sm-2 control-label">Buscar persona</label> 
      <div class="col-sm-2">
        <div class="form-group">
        <div class="select-Persona">
         <%=f.collection_select :persona_id, Persona.all, :id, :to_s_comp, {prompt: true}, {:class => "form-control select"} %>     
         </div>
        </div>
      </div>
    </div>
  
    <div id = "datos_persona" class="form-group hide">
      <label class="col-sm-2 control-label">Agente:</label> 
      <div class="col-sm-2">
        <div class="form-group">
          <%= label_tag 'nombre_persona', nil, id: "nombre_persona", class: "control-label" %>
        </div>
      </div>
      <label class="col-sm-2 control-label">Correo:</label> 
      <div class="col-sm-2">
        <div class="form-group">
          <%= label_tag 'email_persona', nil, id: "email_persona", class: "control-label" %>
        </div>
      </div>
      <label class="col-sm-2 control-label">Contrase√±a:</label> 
      <div class="col-sm-2">
        <div class="form-group">
          <%= label_tag 'contra_persona', nil, id: "contra_persona", class: "control-label" %>
        </div>
      </div>
    </div>

    <div  id = "crear_persona" class="form-group">
      <label class="col-sm-2 control-label">Sin resultados</label> 
      <%= link_to new_persona_concesionaria_path(concesionaria: persona_concesionarium.concesionaria_id), class: "btn-default btn" do %>
        <%= fa_icon "plus", text: "Agregar" %>
      <% end %>
    </div>
  
  <div class="field">
    <%= f.hidden_field :concesionaria_id %>
  </div>

  <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <%= f.submit class: "btn btn-primary" ,value: "Guardar" %>
        <%= link_to persona_concesionarium.concesionaria, class: 'btn btn-primary' do %>
          <%= fa_icon "arrow-left", text: "Atras" %>
        <% end %>
      </div>
  </div>

  </div>
<% end %>

<script type="text/javascript">
$(document).ready( ready );                  //... once document ready
$(document).ajaxComplete( ready );           //... once ajax is complete
$(document).on('turbolinks:load', ready );   //... once a link is clicked

$(document).on('turbolinks:before-cache', function() {     // this approach corrects the select 2 to be duplicated when clicking the back button.
        $('.select-select2').select2('destroy');
        $('.select-search-select2').select2('destroy');
    } );
</script>
