<%= form_for(carga_diarium, html: { class: "form-horizontal", role: "form" }) do |f| %>
  <div id="errors" class="alert alert-danger alert-dismissable" role="alert">
    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h5><b><%= fa_icon "exclamation-circle", text: "AtenciÃ³n! Ocurrieron los siguientes errores" %></b></h5>
    <ul id="error">      
    </ul>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <%= f.label :fecha, class: "col-sm-3 control-label" %>
      <div class="col-sm-2">
        <%= f.text_field :fecha, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :cantidad, "Cantidad", class: "col-sm-3 control-label" %>
      <div class="col-sm-2">
        <%= f.text_field :cantidad, class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :tipo_objetivo_id, "Tipo de objetivo", class: "col-sm-3 control-label" %>
      <div class="col-sm-3">
        <%= f.collection_select :tipo_objetivo_id, TipoObjetivo.all, :id, :to_s, {prompt: false}, {:class => "form-control"} %>
      </div>
    </div>
  </div>
  <div class="modal-footer">    
    <div class="col-sm-offset-2 col-sm-10">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      <button id="guardar" type="button" class="btn btn-primary">Guardar</button>
    </div>
  </div>
<% end %>

<script type="text/javascript">
$('document').ready(function(){
  $('#guardar').click(function(){
    $.ajax({
      url: '/carga_diaria',
      type: 'POST',
      data: {
        carga_diarium: {
          fecha: '10/01/2018', 
          cantidad: 3,
          tipo_objetivo_id: undefined
        }
      }
    }).done(function(response){
      console.log(response);
      $('#error').empty();
      $('#error').append('<li>'+response+'</li>');      
    });
  });  
});
</script>
